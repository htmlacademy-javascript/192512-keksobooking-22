{"version":3,"sources":["webpack://keksobooking/./source/js/avatar.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/./source/js/popup-сard.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/show-message.js","webpack://keksobooking/./source/js/validate-form.js","webpack://keksobooking/./source/js/create-fetch.js","webpack://keksobooking/./source/js/filter.js"],"names":["FILE_TYPES","avatarChooser","document","querySelector","avatarField","photoField","photoView","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","preview","createElement","width","height","appendChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","formFilter","formChildren","children","formElements","Array","from","formFilterChildren","formFilterElements","LAT","LNG","map","L","smallIcon","icon","iconUrl","iconSize","iconAnchor","markersGroup","layerGroup","addTo","createMarks","offers","forEach","offer","marker","lat","location","lng","bindPopup","cardElement","content","cloneNode","titlePopup","addressPopup","pricePopup","typePopup","capacityPopup","timePopup","featuresPopup","descPopup","photosPopup","avatarPopup","textContent","title","address","price","type","rooms","guests","checkin","checkout","innerHTML","features","el","join","description","photos","author","avatar","createPopup","addElementDisabled","classEl","elems","classList","add","setAttribute","removeElementDisabled","remove","removeAttribute","on","setView","tileLayer","attribution","mainPinIcon","addAddress","value","toFixed","mainPinMarker","draggable","evt","latLng","target","getLatLng","showPopup","id","className","onSend","code","removeEventListener","mainForm","typeField","inputFieldPrice","timeIn","timeOut","roomNumber","capacityGuests","querySelectorAll","TypeApartment","bungalow","flat","palace","house","NumberRoom","formData","onError","preventDefault","FormData","fetch","method","credentials","body","then","response","ok","reset","setLatLng","catch","min","placeholder","setDisabledOption","disabled","includes","filterForm","typeHouse","typePrice","typeRoom","typeGuest","onSuccess","data","slice","_","debounce","filterData","filter","filterTypeHouse","filterPrice","room","Number","filterRooms","guest","filterGuests","featureElems","every","feature","compareFeature","filterOffers","removeLayer","json"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst avatarChooser = document.querySelector('.ad-form-header__preview img');\nconst avatarField = document.querySelector('.ad-form__field input[type=file]');\nconst photoField = document.querySelector('.ad-form__upload input[type=file]');\nconst photoView = document.querySelector('.ad-form__photo');\n\n\navatarField.addEventListener('change', () => {\n  const file = avatarField.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      avatarChooser.src = reader.result;\n    });\n    reader.readAsDataURL(file);\n  }\n});\n\nphotoField.addEventListener('change', () => {\n  const file = photoField.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      const preview = document.createElement('img');\n      preview.width = 70;\n      preview.height = 70;\n      preview.src = reader.result;\n      photoView.appendChild(preview);\n    });\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const createPopup = (offer) => {\n  const templateCard = document.querySelector('#card').content;\n  const newCard = templateCard.querySelector('.popup');\n  const cardElement = newCard.cloneNode(true);\n  const titlePopup = cardElement.querySelector('.popup__title');\n  const addressPopup = cardElement.querySelector('.popup__text--address');\n  const pricePopup = cardElement.querySelector('.popup__text--price');\n  const typePopup = cardElement.querySelector('.popup__type');\n  const capacityPopup = cardElement.querySelector('.popup__text--capacity');\n  const timePopup = cardElement.querySelector('.popup__text--time');\n  const featuresPopup = cardElement.querySelector('.popup__features');\n  const descPopup = cardElement.querySelector('.popup__description');\n  const photosPopup = cardElement.querySelector('.popup__photos');\n  const avatarPopup = cardElement.querySelector('.popup__avatar');\n\n  titlePopup.textContent = offer.offer.title;\n  addressPopup.textContent = offer.offer.address;\n  pricePopup.textContent = `${offer.offer.price} ₽/ночь`;\n  typePopup.textContent = offer.offer.type;\n  capacityPopup.textContent = `${offer.offer.rooms} комнаты для ${offer.offer.guests} гостей`;\n  timePopup.textContent = `Заезд после ${offer.offer.checkin}, выезд до ${offer.offer.checkout}`;\n\n  featuresPopup.innerHTML = offer.offer.features.map(el => {\n    return `<li class=\"popup__feature popup__feature--${el}\"></li>`;\n  }).join('');\n\n  descPopup.textContent = offer.offer.description;\n\n  photosPopup.innerHTML = offer.offer.photos.map(el => {\n    return `<img src=\"${el}\" class=\"popup__photo\" width=\"45\" height=\"40\" alt=\"Фотография жилья\"></img>`;\n  }).join('');\n  \n  avatarPopup.src = offer.author.avatar;\n\n  return cardElement;\n\n};\n\nexport { createPopup };\n","import { createPopup } from './popup-сard.js';\n\nconst form = document.querySelector('.ad-form');\nconst formFilter = document.querySelector('.map__filters');\nconst formChildren = form.children;\nconst formElements = Array.from(formChildren);\nconst formFilterChildren = formFilter.children;\nconst formFilterElements = Array.from(formFilterChildren);\nconst LAT = 35.6895000;\nconst LNG = 139.6917100;\nconst map = L.map('map-canvas');\nconst smallIcon = L.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nlet markersGroup = L.layerGroup().addTo(map);\n\n/*функция создает массив меток*/\nconst createMarks = function (offers) {\n  offers.forEach(offer => {\n  /*global L:readonly*/\n    const marker = L.marker(\n      {\n        lat: offer.location.lat,\n        lng: offer.location.lng,\n      },\n      {\n        icon: smallIcon,\n      });\n    marker\n      .addTo(markersGroup)\n      .bindPopup(\n        createPopup(offer),\n      );\n  });\n};\n\nconst removeMarker = () => {\n  map.removeLayer(markersGroup);\n  markersGroup = L.layerGroup().addTo(map);\n};\n\n/*функция добавляет класс .ad-form--disabled и атрибут disabled */\nconst addElementDisabled = function(classEl, elems) {\n  classEl.classList.add('ad-form--disabled');\n  elems.forEach(el => {\n    el.setAttribute('disabled', 'true');\n  });\n};\naddElementDisabled(form, formElements);\naddElementDisabled(formFilter, formFilterElements);\n\nconst removeElementDisabled = function (classEl, elems) {\n  classEl.classList.remove('ad-form--disabled');\n  elems.forEach(el => {\n    el.removeAttribute('disabled');\n  });\n};\n\nmap.on('load', () => {\n  removeElementDisabled(form, formElements);\n  removeElementDisabled(formFilter, formFilterElements);\n})\n  .setView({\n    lat: LAT,\n    lng: LNG,\n  }, 10);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst addAddress = (lat, lng) => {\n  const address = document.querySelector('#address');\n  address.value = `${lat.toFixed(5)}, ${lng.toFixed(5)}`;\n};\n\nconst onLoadMainPin = (evt) => {\n  const latLng = evt.target.getLatLng();\n  addAddress(latLng.lat, latLng.lng);\n};\n\nconst mainPinMarker = L.marker(\n  {\n    lat: LAT,\n    lng: LNG,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nmainPinMarker.addTo(map);\naddAddress(LAT, LNG);\nmainPinMarker.on('moveend', onLoadMainPin);\n\nconst setInitStartPin = () => {\n  map.setView({\n    lat: LAT,\n    lng: LNG,\n  }, 10);\n  mainPinMarker.setLatLng({\n    lat: LAT,\n    lng: LNG,\n  });\n  addAddress(LAT, LNG);\n};\n\nexport { createMarks, setInitStartPin, removeMarker };\n","const showPopup = (id, className) => {\n  const templateCard = document.querySelector(id).content;\n  const newCard = templateCard.querySelector(className);\n  const cardElement = newCard.cloneNode(true);\n  const container = document.querySelector('main');\n\n  container.appendChild(cardElement);\n\n  const onSend = (evt) => {\n    if (evt.code === 'Escape') {\n      cardElement.remove();\n      document.removeEventListener('keydown', onSend);\n    }\n  };\n  document.addEventListener('keydown', onSend);\n};\n\nconst showMsg = () => {\n  showPopup('#success', '.success');\n};\n\nconst showError = () => {\n  showPopup('#error', '.error');\n};\n\nexport { showMsg, showError };\n","import { showMsg } from './show-message.js';\nimport { showError } from './show-message.js';\nimport { setInitStartPin } from './map.js';\nimport { createSubmit } from './create-fetch.js';\n\nconst mainForm = document.querySelector('.ad-form');\nconst typeField = mainForm.querySelector('#type');\nconst inputFieldPrice = mainForm.querySelector('#price');\nconst timeIn = mainForm.querySelector('#timein');\nconst timeOut = mainForm.querySelector('#timeout');\nconst roomNumber = mainForm.querySelector('#room_number');\nconst capacityGuests = mainForm.querySelectorAll('#capacity option');\n\n\n\nconst TypeApartment = {\n  bungalow: 0,\n  flat: 1000,\n  palace: 10000,\n  house: 5000,\n};\n\nconst NumberRoom = {\n  '1': ['1'],\n  '2': ['1', '2'],\n  '3': ['1', '2', '3'],\n  '100': ['0'],\n};\n\nmainForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  const formData = new FormData(evt.target);\n\n  createSubmit(\n    formData,\n    () => {\n      mainForm.reset();\n      showMsg();\n      setInitStartPin();\n    },\n    () => {\n      showError();\n    },\n  );\n});\n\ntypeField.addEventListener('change', () => {\n  inputFieldPrice.min = TypeApartment[typeField.value];\n  inputFieldPrice.placeholder = TypeApartment[typeField.value];\n});\n\ntimeIn.addEventListener('change', () => {\n  timeOut.value = timeIn.value;\n});\ntimeOut.addEventListener('change', () => {\n  timeIn.value = timeOut.value;\n});\n\nconst setDisabledOption = () => {\n  capacityGuests.forEach(el => {\n    el.removeAttribute('selected');\n    el.disabled = true;\n    if (NumberRoom[roomNumber.value].includes(el.value)) {\n      el.setAttribute('selected', true);\n      el.disabled = false;\n    }\n  });\n};\n\nsetDisabledOption();\n\nroomNumber.addEventListener('change', setDisabledOption);\n\n\n\n\n\n\n\n","const createFetch = (onSuccess) => () => {\n  return fetch('https://22.javascript.pages.academy/keksobooking/data', {\n    method: 'GET',\n    credentials: 'same-origin',\n  })\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then((data) => {\n      onSuccess(data);\n    });\n};\n\nconst createSubmit = (formData, onSuccess, onError) => {\n  return fetch('https://22.javascript.pages.academy/keksobooking', {\n    method: 'POST',\n    credentials: 'same-origin',\n    body: formData,\n  }).then((response) => {\n    if (response.ok) {\n      onSuccess();\n    } else {\n      onError();\n    }\n  })\n    .catch(() => {\n      onError();\n    });\n};\n\nexport { createFetch, createSubmit };\n","import { createMarks, removeMarker } from './map.js';\nimport { createFetch } from './create-fetch.js';\n\nconst filterForm = document.querySelector('.map__filters');\nconst typeHouse = filterForm.querySelector('#housing-type');\nconst typePrice = filterForm.querySelector('#housing-price');\nconst typeRoom = filterForm.querySelector('#housing-rooms');\nconst typeGuest = filterForm.querySelector('#housing-guests');\n\nconst SIMILAR_OFFER_COUNT = 10;\nconst DELAY = 500;\n\nconst filterPrice = (offer, price) => {\n  if (price === 'any') {\n    return true;\n  }\n  if (offer.offer.price <= 10000 && price === 'low') {\n    return true;\n  }\n  if (offer.offer.price > 10000 && offer.offer.price <= 50000 && price === 'middle') {\n    return true;\n  }\n  if (offer.offer.price > 50000 && price === 'high') {\n    return true;\n  }\n  return false;\n};\n\nconst filterTypeHouse = (offer, type) => {\n  if (type === 'any' || offer.offer.type === type) {\n    return true;\n  }\n  return false;\n};\n\nconst filterRooms = (offer, room) => {\n  if (room === 'any') {\n    return true;\n  }\n  if (Number(room) === Number(offer.offer.rooms)) {\n    return true;\n  }\n  return false;\n};\n\nconst filterGuests = (offer, guest) => {\n  if (guest === 'any') {\n    return true;\n  }\n  if (Number(guest) === offer.offer.guests) {\n    return true;\n  }\n  return false;\n};\n\nconst compareFeature = (offer) => {\n  const featureElems = filterForm.querySelectorAll('.map__checkbox:checked');\n  const featureList = Array.from(featureElems).map(el => el.value);\n  return featureList.every((feature) => offer.offer.features.includes(feature));\n};\n\n\nconst filterOffers = (offers) => {\n  const elems = offers.filter((offer) => {\n    return filterTypeHouse(offer, typeHouse.value) && filterPrice(offer, typePrice.value) && filterRooms(offer, typeRoom.value) && filterGuests(offer, typeGuest.value) && compareFeature(offer);\n  });\n  return elems;\n};\n\nlet offers = [];\n\nconst fetchData = createFetch((data) => {\n  /*global _:readonly*/\n  offers = data;\n  createMarks(offers.slice(0, SIMILAR_OFFER_COUNT));\n  filterForm.addEventListener('change', _.debounce(() => {\n    const filterData = filterOffers(offers);\n    removeMarker();\n    createMarks(filterData.slice(0, SIMILAR_OFFER_COUNT));\n  }, DELAY));\n});\nfetchData();\n\n\n\n\n"],"sourceRoot":""}